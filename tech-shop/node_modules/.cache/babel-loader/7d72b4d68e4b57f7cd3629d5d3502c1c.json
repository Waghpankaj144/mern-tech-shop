{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Downloads/totalitycorp-frontend-challenge-main/tech-shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/User/Downloads/totalitycorp-frontend-challenge-main/tech-shop/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/User/Downloads/totalitycorp-frontend-challenge-main/tech-shop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/User/Downloads/totalitycorp-frontend-challenge-main/tech-shop/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useContext,useEffect,useReducer}from\"react\";import axios from\"axios\";import reducer from\"../reducer/productReducer\";import{jsx as _jsx}from\"react/jsx-runtime\";var AppContext=/*#__PURE__*/createContext();var API=\"https://api.pujakaitem.com/api/products\";var initialState={isLoading:false,isError:false,products:[],featureProducts:[],isSingleLoading:false,singleProduct:{}};var AppProvider=function AppProvider(_ref){var children=_ref.children;var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var getProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var res,products;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:\"SET_LOADING\"});_context.prev=1;_context.next=4;return axios.get(url);case 4:res=_context.sent;_context.next=7;return res.data;case 7:products=_context.sent;dispatch({type:\"SET_API_DATA\",payload:products});_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);dispatch({type:\"API_ERROR\"});case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function getProducts(_x){return _ref2.apply(this,arguments);};}();// my 2nd api call for single product\nvar getSingleProduct=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url){var res,singleProduct;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:\"SET_SINGLE_LOADING\"});_context2.prev=1;_context2.next=4;return axios.get(url);case 4:res=_context2.sent;_context2.next=7;return res.data;case 7:singleProduct=_context2.sent;dispatch({type:\"SET_SINGLE_PRODUCT\",payload:singleProduct});_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);dispatch({type:\"SET_SINGLE_ERROR\"});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function getSingleProduct(_x2){return _ref3.apply(this,arguments);};}();useEffect(function(){getProducts(API);},[]);return/*#__PURE__*/_jsx(AppContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{getSingleProduct:getSingleProduct}),children:children});};// custom hooks\nvar useProductContext=function useProductContext(){return useContext(AppContext);};export{AppProvider,AppContext,useProductContext};","map":{"version":3,"names":["createContext","useContext","useEffect","useReducer","axios","reducer","AppContext","API","initialState","isLoading","isError","products","featureProducts","isSingleLoading","singleProduct","AppProvider","children","state","dispatch","getProducts","url","type","get","res","data","payload","getSingleProduct","useProductContext"],"sources":["C:/Users/User/Downloads/totalitycorp-frontend-challenge-main/tech-shop/src/context/productcontex.js"],"sourcesContent":["import { createContext, useContext, useEffect, useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport reducer from \"../reducer/productReducer\";\r\n\r\nconst AppContext = createContext();\r\n\r\nconst API = \"https://api.pujakaitem.com/api/products\";\r\n\r\nconst initialState = {\r\n  isLoading: false,\r\n  isError: false,\r\n  products: [],\r\n  featureProducts: [],\r\n  isSingleLoading: false,\r\n  singleProduct: {},\r\n};\r\n\r\nconst AppProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  const getProducts = async (url) => {\r\n    dispatch({ type: \"SET_LOADING\" });\r\n    try {\r\n      const res = await axios.get(url);\r\n      const products = await res.data;\r\n      dispatch({ type: \"SET_API_DATA\", payload: products });\r\n    } catch (error) {\r\n      dispatch({ type: \"API_ERROR\" });\r\n    }\r\n  };\r\n\r\n  // my 2nd api call for single product\r\n\r\n  const getSingleProduct = async (url) => {\r\n    dispatch({ type: \"SET_SINGLE_LOADING\" });\r\n    try {\r\n      const res = await axios.get(url);\r\n      const singleProduct = await res.data;\r\n      dispatch({ type: \"SET_SINGLE_PRODUCT\", payload: singleProduct });\r\n    } catch (error) {\r\n      dispatch({ type: \"SET_SINGLE_ERROR\" });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProducts(API);\r\n  }, []);\r\n\r\n  return (\r\n    <AppContext.Provider value={{ ...state, getSingleProduct }}>\r\n      {children}\r\n    </AppContext.Provider>\r\n  );\r\n};\r\n\r\n// custom hooks\r\nconst useProductContext = () => {\r\n  return useContext(AppContext);\r\n};\r\n\r\nexport { AppProvider, AppContext, useProductContext };\r\n"],"mappings":"+nBAAA,OAASA,aAAT,CAAwBC,UAAxB,CAAoCC,SAApC,CAA+CC,UAA/C,KAAiE,OAAjE,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,QAAP,KAAoB,2BAApB,C,2CAEA,GAAMC,WAAU,cAAGN,aAAa,EAAhC,CAEA,GAAMO,IAAG,CAAG,yCAAZ,CAEA,GAAMC,aAAY,CAAG,CACnBC,SAAS,CAAE,KADQ,CAEnBC,OAAO,CAAE,KAFU,CAGnBC,QAAQ,CAAE,EAHS,CAInBC,eAAe,CAAE,EAJE,CAKnBC,eAAe,CAAE,KALE,CAMnBC,aAAa,CAAE,EANI,CAArB,CASA,GAAMC,YAAW,CAAG,QAAdA,YAAc,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CACpC,gBAA0Bb,UAAU,CAACE,OAAD,CAAUG,YAAV,CAApC,4CAAOS,KAAP,iBAAcC,QAAd,iBAEA,GAAMC,YAAW,6FAAG,iBAAOC,GAAP,qIAClBF,QAAQ,CAAC,CAAEG,IAAI,CAAE,aAAR,CAAD,CAAR,CADkB,sCAGEjB,MAAK,CAACkB,GAAN,CAAUF,GAAV,CAHF,QAGVG,GAHU,qCAIOA,IAAG,CAACC,IAJX,QAIVb,QAJU,eAKhBO,QAAQ,CAAC,CAAEG,IAAI,CAAE,cAAR,CAAwBI,OAAO,CAAEd,QAAjC,CAAD,CAAR,CALgB,iFAOhBO,QAAQ,CAAC,CAAEG,IAAI,CAAE,WAAR,CAAD,CAAR,CAPgB,qEAAH,kBAAXF,YAAW,6CAAjB,CAWA;AAEA,GAAMO,iBAAgB,6FAAG,kBAAON,GAAP,8IACvBF,QAAQ,CAAC,CAAEG,IAAI,CAAE,oBAAR,CAAD,CAAR,CADuB,wCAGHjB,MAAK,CAACkB,GAAN,CAAUF,GAAV,CAHG,QAGfG,GAHe,uCAIOA,IAAG,CAACC,IAJX,QAIfV,aAJe,gBAKrBI,QAAQ,CAAC,CAAEG,IAAI,CAAE,oBAAR,CAA8BI,OAAO,CAAEX,aAAvC,CAAD,CAAR,CALqB,qFAOrBI,QAAQ,CAAC,CAAEG,IAAI,CAAE,kBAAR,CAAD,CAAR,CAPqB,uEAAH,kBAAhBK,iBAAgB,8CAAtB,CAWAxB,SAAS,CAAC,UAAM,CACdiB,WAAW,CAACZ,GAAD,CAAX,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,KAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,gCAAOU,KAAP,MAAcS,gBAAgB,CAAhBA,gBAAd,EAA1B,UACGV,QADH,EADF,CAKD,CApCD,CAsCA;AACA,GAAMW,kBAAiB,CAAG,QAApBA,kBAAoB,EAAM,CAC9B,MAAO1B,WAAU,CAACK,UAAD,CAAjB,CACD,CAFD,CAIA,OAASS,WAAT,CAAsBT,UAAtB,CAAkCqB,iBAAlC"},"metadata":{},"sourceType":"module"}